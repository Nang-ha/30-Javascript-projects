WEBVTT

1
00:00:01.469 --> 00:00:02.302
<v Instructor>All right, let's make</v>

2
00:00:02.302 --> 00:00:03.980
our first data type.

3
00:00:03.980 --> 00:00:04.930
So every single time

4
00:00:04.930 --> 00:00:06.840
that we create a data type,

5
00:00:06.840 --> 00:00:09.360
we are going to be writing

6
00:00:09.360 --> 00:00:10.730
something called a schema.

7
00:00:10.730 --> 00:00:12.470
And a schema is not only

8
00:00:12.470 --> 00:00:13.970
something that I say funny

9
00:00:13.970 --> 00:00:16.170
but it's also the description

10
00:00:16.170 --> 00:00:17.250
of what our data

11
00:00:17.250 --> 00:00:18.083
will look like.

12
00:00:18.083 --> 00:00:19.582
All the fields,

13
00:00:19.582 --> 00:00:21.380
all of the relationships

14
00:00:21.380 --> 00:00:23.660
all of that stuff that you have.

15
00:00:23.660 --> 00:00:25.010
So what I want you to do

16
00:00:25.010 --> 00:00:28.210
is to go into your schema folder

17
00:00:28.210 --> 00:00:31.170
and create a new file capital U user

18
00:00:31.170 --> 00:00:33.740
dot TS not JS

19
00:00:33.740 --> 00:00:35.170
and then we're going

20
00:00:35.170 --> 00:00:36.003
to make our users.

21
00:00:36.003 --> 00:00:39.220
So say export const user is equal to

22
00:00:39.220 --> 00:00:40.490
and then we'll say list

23
00:00:41.440 --> 00:00:42.590
and list is a method

24
00:00:42.590 --> 00:00:44.220
that comes from Keystone.

25
00:00:44.220 --> 00:00:46.370
So we're gonna auto import that

26
00:00:46.370 --> 00:00:47.550
boom import list

27
00:00:47.550 --> 00:00:48.610
from Keystone next.

28
00:00:48.610 --> 00:00:49.630
Again, that might just be

29
00:00:49.630 --> 00:00:51.800
Keystone JS in the future.

30
00:00:51.800 --> 00:00:53.440
But if you're using auto import,

31
00:00:53.440 --> 00:00:54.360
it shouldn't matter

32
00:00:54.360 --> 00:00:56.630
because it will detect the package

33
00:00:56.630 --> 00:00:57.780
of where it's from.

34
00:00:57.780 --> 00:00:59.040
Then in that list,

35
00:00:59.040 --> 00:01:00.720
we have a couple of things,

36
00:01:00.720 --> 00:01:02.620
we have access.

37
00:01:02.620 --> 00:01:03.870
And we're just gonna comment

38
00:01:03.870 --> 00:01:04.703
that out for now

39
00:01:04.703 --> 00:01:06.240
because we have not hit access

40
00:01:06.240 --> 00:01:07.620
or roles yet.

41
00:01:07.620 --> 00:01:09.020
We have UI,

42
00:01:09.020 --> 00:01:09.950
which is should they be able

43
00:01:09.950 --> 00:01:11.060
to view the UI?

44
00:01:11.060 --> 00:01:11.893
And we're gonna comment

45
00:01:11.893 --> 00:01:12.726
that out again.

46
00:01:12.726 --> 00:01:14.450
That's part of access and roles.

47
00:01:14.450 --> 00:01:15.770
The important one that we want

48
00:01:15.770 --> 00:01:17.110
is called fields.

49
00:01:17.110 --> 00:01:20.680
So fields has an object to it

50
00:01:20.680 --> 00:01:22.490
and these are where we put all

51
00:01:22.490 --> 00:01:23.650
of the fields that we want.

52
00:01:23.650 --> 00:01:25.280
So the person,

53
00:01:25.280 --> 00:01:27.150
so we'll add a name field

54
00:01:27.150 --> 00:01:28.000
and that is going

55
00:01:28.000 --> 00:01:29.340
to be a text field.

56
00:01:29.340 --> 00:01:31.130
Now, we need to import the fields

57
00:01:31.130 --> 00:01:32.730
from Keystone both

58
00:01:32.730 --> 00:01:33.610
so that Keystone knows

59
00:01:33.610 --> 00:01:34.730
how to store the data

60
00:01:34.730 --> 00:01:36.300
as well as how the,

61
00:01:36.300 --> 00:01:37.660
the actual editing interface

62
00:01:37.660 --> 00:01:38.970
that they're going to give to you.

63
00:01:38.970 --> 00:01:40.740
So it's gonna be text like that.

64
00:01:40.740 --> 00:01:41.920
Oh, I put a capital T

65
00:01:41.920 --> 00:01:43.410
on that for us

66
00:01:43.410 --> 00:01:45.333
and we'll try to auto import it.

67
00:01:46.340 --> 00:01:47.490
Doesn't look like

68
00:01:47.490 --> 00:01:48.550
you can auto import it.

69
00:01:48.550 --> 00:01:49.810
So we'll go up here,

70
00:01:49.810 --> 00:01:51.940
import curly bracket.

71
00:01:51.940 --> 00:01:53.180
We want text,

72
00:01:53.180 --> 00:01:54.890
we also want password

73
00:01:54.890 --> 00:01:57.030
and we want relationship.

74
00:01:57.030 --> 00:01:59.110
And those are going to be coming

75
00:01:59.110 --> 00:02:04.110
from at Keystone dash next

76
00:02:04.170 --> 00:02:05.793
four slash fields.

77
00:02:06.760 --> 00:02:08.020
Okay, good.

78
00:02:08.020 --> 00:02:09.150
Now, inside of this text

79
00:02:09.150 --> 00:02:10.140
there's a couple options

80
00:02:10.140 --> 00:02:13.130
we can pass in an options object.

81
00:02:13.130 --> 00:02:14.370
And we're just gonna say

82
00:02:14.370 --> 00:02:18.650
is required is going to be true.

83
00:02:18.650 --> 00:02:19.483
We can take a look

84
00:02:19.483 --> 00:02:20.410
at the other options

85
00:02:20.410 --> 00:02:21.710
they have is unique.

86
00:02:21.710 --> 00:02:22.980
Obviously, if it's unique

87
00:02:22.980 --> 00:02:24.980
and is indexed,

88
00:02:24.980 --> 00:02:26.300
that is important

89
00:02:26.300 --> 00:02:27.860
if you're going to be searching

90
00:02:27.860 --> 00:02:30.210
the database frequently

91
00:02:30.210 --> 00:02:31.830
by somebody's name,

92
00:02:31.830 --> 00:02:33.080
usually you search for somebody

93
00:02:33.080 --> 00:02:34.320
based on their ID

94
00:02:34.320 --> 00:02:35.250
or like a slug

95
00:02:35.250 --> 00:02:36.920
or something like that.

96
00:02:36.920 --> 00:02:37.753
But if you,

97
00:02:37.753 --> 00:02:39.180
if this was like a common field

98
00:02:39.180 --> 00:02:40.780
that you were searching for people.

99
00:02:40.780 --> 00:02:42.900
If you put is index true on that,

100
00:02:42.900 --> 00:02:44.140
that will make your queries nice

101
00:02:44.140 --> 00:02:44.973
and fast.

102
00:02:44.973 --> 00:02:47.740
And remember I talked about earlier

103
00:02:47.740 --> 00:02:49.200
that Mongo DB is gonna give you

104
00:02:49.200 --> 00:02:50.500
a performance adviser.

105
00:02:50.500 --> 00:02:51.333
That's gonna,

106
00:02:51.333 --> 00:02:52.166
it's gonna tell you,

107
00:02:52.166 --> 00:02:53.320
hey, you should be indexing this field.

108
00:02:53.320 --> 00:02:54.910
So don't worry too much about that.

109
00:02:54.910 --> 00:02:56.180
It will tell you when

110
00:02:56.180 --> 00:02:57.253
you run into that.

111
00:02:58.310 --> 00:03:01.800
Next, we have is email

112
00:03:01.800 --> 00:03:05.230
is going to be a text field as well.

113
00:03:05.230 --> 00:03:08.420
And it is required true

114
00:03:08.420 --> 00:03:11.083
and is unique is true.

115
00:03:18.700 --> 00:03:19.533
Next up, we have

116
00:03:19.533 --> 00:03:21.040
the user has a password.

117
00:03:21.040 --> 00:03:23.013
That's going to be a password input.

118
00:03:23.900 --> 00:03:26.060
And there's a couple other values

119
00:03:26.060 --> 00:03:26.893
that we're gonna be

120
00:03:26.893 --> 00:03:27.726
putting on here.

121
00:03:27.726 --> 00:03:28.870
We're gonna give them roles,

122
00:03:28.870 --> 00:03:30.842
carts and orders,

123
00:03:30.842 --> 00:03:32.290
but we don't,

124
00:03:32.290 --> 00:03:33.190
we won't do that now

125
00:03:33.190 --> 00:03:34.023
because we don't have those things.

126
00:03:34.023 --> 00:03:34.856
So we'll say,

127
00:03:34.856 --> 00:03:37.170
do add roles, cart

128
00:03:37.170 --> 00:03:38.263
and orders.

129
00:03:40.210 --> 00:03:42.080
Okay, so now in order

130
00:03:42.080 --> 00:03:44.080
to get this to show up

131
00:03:44.080 --> 00:03:47.370
in our Keystone on the backend here,

132
00:03:47.370 --> 00:03:48.860
let's take a look

133
00:03:48.860 --> 00:03:53.373
at our actual Keystone here.

134
00:03:54.680 --> 00:03:56.470
We need to import that

135
00:03:56.470 --> 00:03:58.110
into our main Keystone file

136
00:03:58.110 --> 00:04:00.650
and pass it to the lists here.

137
00:04:00.650 --> 00:04:02.090
So what we'll do is

138
00:04:02.090 --> 00:04:05.140
we can probably just type user

139
00:04:07.080 --> 00:04:08.700
and it suggests to auto import it.

140
00:04:08.700 --> 00:04:10.440
So I'm gonna hit Enter

141
00:04:10.440 --> 00:04:12.290
and it import yeah.

142
00:04:12.290 --> 00:04:15.910
Import user from schema schema.

143
00:04:15.910 --> 00:04:17.080
And you'll notice that here

144
00:04:17.080 --> 00:04:19.950
I'm using a named export

145
00:04:19.950 --> 00:04:22.530
and not an export default.

146
00:04:22.530 --> 00:04:23.800
And the reason I'm doing that

147
00:04:23.800 --> 00:04:26.120
is because it makes

148
00:04:26.120 --> 00:04:27.330
those auto imports

149
00:04:27.330 --> 00:04:28.940
work a little bit nicer

150
00:04:29.860 --> 00:04:30.693
which is great

151
00:04:30.693 --> 00:04:31.830
because it just auto imported.

152
00:04:31.830 --> 00:04:33.900
So now we have user being passed.

153
00:04:33.900 --> 00:04:35.770
It's normally looks like this, right?

154
00:04:35.770 --> 00:04:37.650
But in JavaScript,

155
00:04:37.650 --> 00:04:38.770
if your property name

156
00:04:38.770 --> 00:04:39.603
and the variable

157
00:04:39.603 --> 00:04:40.460
you're setting it to

158
00:04:40.460 --> 00:04:41.870 line:15% 
are the same thing

159
00:04:41.870 --> 00:04:43.253 line:15% 
then you can simply omit that

160
00:04:43.253 --> 00:04:46.750 line:15% 
and simply just say user.

161
00:04:46.750 --> 00:04:49.160
So one weird thing about Keystone

162
00:04:49.160 --> 00:04:50.340
is that anytime

163
00:04:50.340 --> 00:04:51.760
you change Keystone

164
00:04:51.760 --> 00:04:53.030
you have to reboot

165
00:04:53.030 --> 00:04:54.620
the thing yourself.

166
00:04:54.620 --> 00:04:55.800
You can set it up

167
00:04:55.800 --> 00:04:56.870
to like a node Mon

168
00:04:56.870 --> 00:04:57.703
or something like that

169
00:04:57.703 --> 00:04:58.550
or it will restart

170
00:04:58.550 --> 00:05:00.243
the process itself.

171
00:05:00.243 --> 00:05:02.050
It's not like hot reloaded,

172
00:05:02.050 --> 00:05:04.050
like a lot of the next jazz stuff is

173
00:05:04.050 --> 00:05:05.900
so you do have to kill it.

174
00:05:05.900 --> 00:05:07.130
Literally clear it out,

175
00:05:07.130 --> 00:05:08.900
start it again.

176
00:05:08.900 --> 00:05:09.733
And then it takes

177
00:05:09.733 --> 00:05:10.590
just a quick second

178
00:05:10.590 --> 00:05:12.250
in order to get this thing

179
00:05:12.250 --> 00:05:13.380
started up again.

180
00:05:13.380 --> 00:05:14.980
So refresh,

181
00:05:14.980 --> 00:05:15.813
and you will see this

182
00:05:15.813 --> 00:05:17.460
it's loading

183
00:05:17.460 --> 00:05:20.250
and boom we got our users (laughs)

184
00:05:20.250 --> 00:05:21.083
This is funny

185
00:05:21.083 --> 00:05:22.160
because we haven't put

186
00:05:22.160 --> 00:05:23.670
any auth in place yet.

187
00:05:23.670 --> 00:05:24.720
So it's just,

188
00:05:24.720 --> 00:05:25.660
it's kind of fun

189
00:05:25.660 --> 00:05:26.580
because you could

190
00:05:26.580 --> 00:05:28.090
just make a whole application

191
00:05:28.090 --> 00:05:29.360
with no auth at all.

192
00:05:29.360 --> 00:05:30.470
And that's really good

193
00:05:30.470 --> 00:05:32.319
for just quickly prototyping.

194
00:05:32.319 --> 00:05:33.817
You can go to users.

195
00:05:33.817 --> 00:05:36.264
You can create a username,

196
00:05:36.264 --> 00:05:37.890
email, they have a password

197
00:05:37.890 --> 00:05:39.160
all this kind of cool stuff,

198
00:05:39.160 --> 00:05:40.350
which is neat.

199
00:05:40.350 --> 00:05:42.280
Don't create anything just yet,

200
00:05:42.280 --> 00:05:43.113
because we're gonna layer on

201
00:05:43.113 --> 00:05:44.390
some auth first,

202
00:05:44.390 --> 00:05:45.223
before we go ahead

203
00:05:45.223 --> 00:05:46.810
and do any of that.

204
00:05:46.810 --> 00:05:47.643
So I'll see you

205
00:05:47.643 --> 00:05:48.960
in the next video when we do that.

